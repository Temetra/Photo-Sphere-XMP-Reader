var _XmpReader=function(e){var t={};function a(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(r,s,function(t){return e[t]}.bind(null,s));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";a.r(t);var r="http://ns.adobe.com/xap/1.0/",s={Stop:"Stop",ReadMarker:"ReadMarker",ReadLengthToNextMarker:"ReadLengthToNextMarker",ReadLengthOfData:"ReadLengthOfData",ReadData:"ReadData"};var i=class{constructor(e,t){this.fileblob=e,this.readComplete=t,this.filereader=new FileReader,this.filereader.onload=(e=>{this.filereaderOnload(e)}),this.currentPos=0,this.sliceLength=2,this.state=s.ReadMarker,this.xmpData=""}getSlice(){var e=this.fileblob.slice(this.currentPos,this.currentPos+this.sliceLength);this.filereader.readAsArrayBuffer(e)}filereaderOnload(e){var t=new Uint8Array(e.target.result);switch(this.state){case s.ReadMarker:this.readMarker(t);break;case s.ReadLengthToNextMarker:this.readLengthToNextMarker(t);break;case s.ReadLengthOfData:this.readLengthOfData(t);break;case s.ReadData:this.readData(t);break;case s.Stop:default:this.readComplete(this.xmpData)}}readMarker(e){if(255!=e[0])this.state=s.Stop;else switch(e[1]){case 216:case 217:case 208:case 209:case 210:case 211:case 212:case 213:case 214:case 215:this.currentPos+=2,this.sliceLength=2,this.state=s.ReadMarker;break;case 221:this.currentPos+=4,this.sliceLength=2,this.state=s.ReadMarker;break;case 192:case 194:case 196:case 219:case 218:case 254:this.currentPos+=2,this.sliceLength=2,this.state=s.ReadLengthToNextMarker;break;case 224:case 225:case 226:this.currentPos+=2,this.sliceLength=2,this.state=s.ReadLengthOfData;break;default:this.state=s.Stop}this.getSlice()}readLengthToNextMarker(e){this.currentPos+=256*e[0]+e[1]-2,this.sliceLength=2,this.state=s.ReadMarker,this.getSlice()}readLengthOfData(e){this.currentPos+=2,this.sliceLength=256*e[0]+e[1]-2,this.state=s.ReadData,this.getSlice()}readData(e){var t=String.fromCharCode.apply(null,e);0==t.indexOf(r)&&(this.xmpData=t.substring(r.length)),this.currentPos+=this.sliceLength,this.sliceLength=2,this.state=s.ReadMarker,this.getSlice()}};function n(e){let t=e.toLowerCase().trim();return"true"===t||"false"!==t&&null}function o(e){return Date.parse(e)}var h={UsePanoramaViewer:n,PoseHeadingDegrees:parseFloat,PosePitchDegrees:parseFloat,PoseRollDegrees:parseFloat,InitialViewHeadingDegrees:parseInt,InitialViewPitchDegrees:parseInt,InitialViewRollDegrees:parseInt,InitialHorizontalFOVDegrees:parseFloat,InitialVerticalFOVDegrees:parseFloat,FirstPhotoDate:o,LastPhotoDate:o,SourcePhotosCount:parseInt,ExposureLockUsed:n,CroppedAreaImageWidthPixels:parseInt,CroppedAreaImageHeightPixels:parseInt,FullPanoWidthPixels:parseInt,FullPanoHeightPixels:parseInt,CroppedAreaLeftPixels:parseInt,CroppedAreaTopPixels:parseInt,InitialCameraDolly:parseFloat};var l=function(e){var t="GPano:"+e+'="',a=this.xmpData.indexOf(t),r=this.xmpData.indexOf('"',a+t.length);if(a<0||r<0)return null;var s=this.xmpData.substring(a+t.length,r);return e in h?(0,h[e])(s):s};a.d(t,"XmpReader",function(){return c});var c=class{constructor(){this.xmpData="",this.events={loaded:[],error:[]}}hasData(){return void 0!=this.xmpData&&this.xmpData.length>0}readFile(e){new i(e,e=>{this.xmpData=e,this.xmpData?this.dispatchEvent("loaded"):this.dispatchEvent("error")}).getSlice()}};c.prototype.getGPanoValue=l,c.prototype.addEventListener=function(e,t){e in this.events&&this.events[e].push(t)},c.prototype.removeEventListener=function(e,t){if(e in this.events){var a=this.events[e].indexOf(t);a>-1&&this.events[e].splice(a,1)}},c.prototype.dispatchEvent=function(e){e in this.events&&this.events[e].forEach(function(e){e(this)})}}]);